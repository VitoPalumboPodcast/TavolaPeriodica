<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quiz di Chimica - Multilivello</title>
  <style>
    :root {
      color-scheme: light;
      --accent: #136f8a;
      --accent-light: #e5f6fb;
      --bg: #f2f6fa;
      --text: #10212b;
      --card: #ffffff;
      --wrong: #d7263d;
      --correct: #1b9d7a;
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      margin: 0;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      padding: 24px;
      display: flex;
      justify-content: center;
      background-image: linear-gradient(180deg, rgba(229, 246, 251, 0.8), rgba(242, 246, 250, 1));
    }

    .app-shell {
      width: min(960px, 100%);
      background: var(--card);
      border-radius: 18px;
      box-shadow: 0 18px 45px rgba(15, 23, 42, 0.15);
      padding: clamp(20px, 5vw, 40px);
    }

    header {
      text-align: center;
      margin-bottom: 24px;
    }

    h1 {
      margin: 0;
      font-size: clamp(2rem, 4vw, 2.5rem);
    }

    p.lead {
      margin-top: 12px;
      color: #243849;
      font-size: clamp(1rem, 2.5vw, 1.15rem);
    }

    .difficulty-selector {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 16px;
      margin: 32px 0 24px;
    }

    .difficulty-selector button {
      border: 2px solid transparent;
      border-radius: 14px;
      padding: 18px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      background: var(--accent-light);
      color: var(--accent);
      transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
    }

    .difficulty-selector button:hover,
    .difficulty-selector button:focus-visible {
      transform: translateY(-3px);
      box-shadow: 0 12px 24px rgba(31, 122, 140, 0.25);
      border-color: var(--accent);
      outline: none;
    }

    .difficulty-selector button.active {
      background: var(--accent);
      color: white;
      border-color: transparent;
    }

    .quiz-card {
      background: linear-gradient(145deg, #ffffff, #edf4fa);
      border-radius: 18px;
      padding: clamp(20px, 4vw, 36px);
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.5);
    }

    .meta {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: space-between;
      margin-bottom: 18px;
      font-weight: 600;
      color: #334155;
    }

    .question {
      font-size: clamp(1.1rem, 2.5vw, 1.35rem);
      margin-bottom: 20px;
    }

    .options {
      display: grid;
      gap: 12px;
    }

    .option {
      border: 2px solid rgba(148, 163, 184, 0.35);
      border-radius: 12px;
      padding: 14px 16px;
      background: #fdfefe;
      color: var(--text);
      cursor: pointer;
      text-align: left;
      font-size: 1rem;
      transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;
    }

    .option:hover,
    .option:focus-visible {
      border-color: var(--accent);
      box-shadow: 0 10px 20px rgba(31, 122, 140, 0.15);
      transform: translateY(-2px);
      outline: none;
    }

    .option.correct {
      border-color: var(--correct);
      background: rgba(27, 157, 122, 0.18);
      color: #0f4d43;
      cursor: default;
    }

    .option.wrong {
      border-color: var(--wrong);
      background: rgba(215, 38, 61, 0.12);
      color: #6b0f1d;
      cursor: default;
    }

    .feedback {
      margin-top: 18px;
      padding: 16px;
      border-radius: 12px;
      font-weight: 500;
      background: rgba(16, 33, 43, 0.08);
      border: 1px solid rgba(16, 33, 43, 0.18);
      display: none;
    }

    .feedback.visible {
      display: block;
    }

    .feedback.positive {
      border-color: rgba(42, 157, 143, 0.4);
      background: rgba(42, 157, 143, 0.15);
      color: #11665c;
    }

    .feedback.negative {
      border-color: rgba(215, 38, 61, 0.4);
      background: rgba(215, 38, 61, 0.12);
      color: #861226;
    }

    .controls {
      margin-top: 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 12px;
    }

    .controls button {
      border: none;
      border-radius: 12px;
      padding: 12px 20px;
      font-size: 1rem;
      cursor: pointer;
      background: var(--accent);
      color: #fff;
      font-weight: 600;
      transition: background 0.2s ease, transform 0.2s ease;
    }

    .controls button[disabled] {
      background: #94a3b8;
      cursor: not-allowed;
    }

    .controls button:hover:not([disabled]),
    .controls button:focus-visible:not([disabled]) {
      transform: translateY(-2px);
      outline: none;
    }

    .summary {
      text-align: center;
      padding: 24px 18px;
      border-radius: 16px;
      background: rgba(31, 122, 140, 0.08);
      margin-top: 28px;
      display: none;
    }

    .summary.visible {
      display: block;
    }

    @media (max-width: 640px) {
      body {
        padding: 16px;
      }

      .controls {
        flex-direction: column;
        align-items: stretch;
      }

      .controls button {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <main class="app-shell" role="main">
    <header>
      <h1>Quiz di Chimica Multilivello</h1>
      <p class="lead">
        Scegli il livello di difficoltà, rispondi alle domande con feedback immediato e scopri la spiegazione di ogni risposta.
        Alla fine otterrai il tuo punteggio complessivo.
      </p>
    </header>

    <section>
      <h2>Seleziona la difficoltà</h2>
      <div class="difficulty-selector" role="group" aria-label="Seleziona livello di difficoltà">
        <button type="button" data-level="facile">Livello Super Facile / Concreto</button>
        <button type="button" data-level="medio">Livello Medio</button>
        <button type="button" data-level="difficile">Livello Difficile</button>
      </div>
    </section>

    <section class="quiz-card" aria-live="polite">
      <div class="meta">
        <span id="progress">Domanda 0 / 0</span>
        <span id="score">Punteggio: 0</span>
      </div>
      <div id="question" class="question">Seleziona un livello per iniziare.</div>
      <div id="options" class="options" role="list"></div>
      <div id="feedback" class="feedback" aria-live="assertive"></div>
      <div class="controls">
        <button id="next" type="button" disabled>Prossima domanda</button>
        <button id="restart" type="button" disabled>Ricomincia</button>
      </div>
      <div id="summary" class="summary" role="status"></div>
    </section>
  </main>

  <script>
    const quizData = {
      facile: [
        {
          question: "Che cos'è la Materia?",
          choices: [
            "Tutto ciò che è visibile.",
            "Tutto ciò che è caldo.",
            "Tutto ciò che ha un peso (massa) e occupa uno spazio (volume).",
            "Tutto ciò che si rompe."
          ],
          correct: 2,
          explanation:
            "La materia è definita come tutto ciò che possiede massa e occupa un determinato volume."
        },
        {
          question:
            "Se metti fango e acqua in un bicchiere e lo lasci fermo, il fango (che è più denso) cade giù. Qual è la forza che lo spinge in fondo?",
          choices: [
            "La forza centrifuga.",
            "La Forza di Gravità.",
            "La forza magnetica.",
            "La forza di pressione."
          ],
          correct: 1,
          explanation:
            "La decantazione sfrutta la diversa densità unita alla forza di gravità, che fa depositare le particelle più dense sul fondo."
        },
        {
          question:
            "L'insegnante spiega che 'il vuoto non esiste'. Perché un bicchiere che sembra vuoto è in realtà pieno?",
          choices: [
            "È pieno di elettricità.",
            "È pieno di Aria.",
            "È pieno di atomi che si vedono.",
            "È pieno di luce."
          ],
          correct: 1,
          explanation:
            "Un bicchiere apparentemente vuoto contiene aria, che possiede massa e volume: quindi è materia."
        },
        {
          question:
            "Il ferro, l'oro e il rame (Cu) si trovano a sinistra nella Tavola Periodica. Sono quasi tutti solidi, lucenti e sono ottimi conduttori. Come vengono chiamati?",
          choices: ["Non metalli.", "Gas nobili.", "Metalli.", "Semimetalli."],
          correct: 2,
          explanation:
            "Gli elementi a sinistra della diagonale sono i metalli, lucenti e ottimi conduttori di calore ed elettricità."
        },
        {
          question:
            "La Chimica studia la materia non a livello macroscopico (ciò che vediamo), ma a un livello molto, molto piccolo. Come viene chiamato questo livello?",
          choices: [
            "Livello Atomico.",
            "Livello Microscopico o Ultramicroscopico.",
            "Livello Macroscopico.",
            "Livello Visibile."
          ],
          correct: 1,
          explanation:
            "La chimica indaga la materia al livello microscopico o ultramicroscopico, dove si trovano atomi e molecole."
        },
        {
          question: "Un Miscuglio Eterogeneo è un miscuglio in cui...",
          choices: [
            "I componenti sono perfettamente sciolti e non si vedono.",
            "I singoli componenti sono visibilmente distinguibili (si vedono).",
            "È una Sostanza Pura.",
            "Si usa solo la Distillazione per separarlo."
          ],
          correct: 1,
          explanation:
            "In un miscuglio eterogeneo, come acqua e olio, i componenti restano visibili e distinguibili."
        },
        {
          question:
            "Quando usi lo scolapasta per scolare la pasta, stai usando un metodo di separazione basato sulla differenza di:",
          choices: ["Colore.", "Peso (densità).", "Dimensione.", "Volatilità."],
          correct: 2,
          explanation:
            "Lo scolapasta funziona per filtrazione, separando in base alla diversa dimensione dei componenti."
        },
        {
          question:
            "Se scaldi un oggetto, le sue particelle si allontanano (dilatazione). Cosa succede invece quando raffreddi un oggetto?",
          choices: [
            "Non succede nulla.",
            "Le particelle restano dove sono.",
            "Le particelle si avvicinano e l'oggetto si restringe.",
            "L'oggetto diventa più pesante."
          ],
          correct: 2,
          explanation:
            "Raffreddare causa un restringimento: le particelle si avvicinano tra loro."
        },
        {
          question:
            "Le particelle fondamentali della materia si chiamano Atomi. Quali di queste particelle non variano mai per un certo elemento?",
          choices: ["Elettroni.", "Neutroni.", "Protoni.", "Ioni."],
          correct: 2,
          explanation:
            "Il numero di protoni (Numero Atomico Z) è fisso e identifica in modo univoco l'elemento."
        },
        {
          question:
            "Un Miscuglio Omogeneo (o Soluzione) come l'acqua e sale, all'occhio appare come:",
          choices: [
            "Due strati separati.",
            "Un'unica cosa (non vedi i singoli componenti).",
            "Un solido.",
            "Un elemento chimico."
          ],
          correct: 1,
          explanation:
            "Nelle soluzioni i componenti non sono distinguibili: si osserva un'unica fase uniforme."
        },
        {
          question:
            "Il nucleo dell'atomo contiene protoni e neutroni. Gli elettroni dove si trovano?",
          choices: [
            "Non esistono.",
            "Sono dentro il nucleo.",
            "Ruotano velocemente intorno al nucleo.",
            "Si toccano con gli elettroni degli altri atomi."
          ],
          correct: 2,
          explanation:
            "Gli elettroni si muovono rapidamente intorno al nucleo, occupando gli orbitali."
        },
        {
          question:
            "I chimici usano l'acronimo CHOMPS per ricordare sei elementi fondamentali per la vita. Qual è l'elemento 're della vita'?",
          choices: ["Carbonio.", "Cloro.", "Calcio.", "Rame."],
          correct: 0,
          explanation:
            "La vita sul pianeta si è organizzata intorno all'elemento Carbonio (C)."
        },
        {
          question:
            "Se una Sostanza Pura è formata dall'unione di due o più Elementi, viene chiamata:",
          choices: ["Miscuglio.", "Elemento.", "Composto Chimico.", "Soluzione."],
          correct: 2,
          explanation:
            "Un composto chimico è una sostanza pura composta da due o più elementi combinati chimicamente."
        },
        {
          question:
            "Quale metodo di separazione, paragonato a una decantazione accelerata, utilizza la forza centrifuga?",
          choices: ["Filtrazione.", "Centrifugazione.", "Distillazione.", "Decantazione."],
          correct: 1,
          explanation:
            "La centrifugazione accelera la decantazione sfruttando la forza centrifuga per separare rapidamente componenti con densità diverse."
        },
        {
          question:
            "L'atomo di Ferro (Fe) è un elemento. Di quanti tipi di atomi è fatta una barretta di Ferro?",
          choices: [
            "Diversi tipi di atomi.",
            "Nessun atomo.",
            "Solo atomi tutti uguali di Ferro.",
            "Solo molecole."
          ],
          correct: 2,
          explanation:
            "Un elemento è costituito esclusivamente da atomi uguali dello stesso elemento."
        },
        {
          question:
            "Se un atomo neutro perde elettroni, che tipo di carica avrà lo ione risultante?",
          choices: ["Neutra.", "Positiva (Catione).", "Negativa (Anione).", "Non può succedere."],
          correct: 1,
          explanation:
            "Perdendo cariche negative (elettroni) l'atomo presenta un eccesso di cariche positive e diventa un catione."
        },
        {
          question:
            "L'Idrogeno è l'elemento con Numero Atomico 1 ed è un gas. Nonostante sia a sinistra della Tavola Periodica è un:",
          choices: ["Gas nobile.", "Non Metallo.", "Semimetallo.", "Metallo liquido."],
          correct: 1,
          explanation:
            "L'idrogeno è un non metallo ed è un gas che necessita di pressione e raffreddamento per liquefarsi."
        },
        {
          question:
            "Quale caratteristica fisica sfruttano i metodi di Distillazione per separare i componenti?",
          choices: ["La stratificazione.", "La dimensione.", "La volatilità (punti di ebollizione).", "La forza di gravità."],
          correct: 2,
          explanation:
            "La distillazione si basa sulla diversa volatilità, ossia sui differenti punti di ebollizione delle sostanze."
        },
        {
          question:
            "L'atomo è fatto di particelle, ma la sua struttura è per la maggior parte:",
          choices: ["Piena di molecole.", "Piena di acqua.", "Vuota (spazio vuoto).", "Piena di legami chimici."],
          correct: 2,
          explanation:
            "Gli atomi sono quasi del tutto vuoti: la massa è concentrata nel nucleo e c'è spazio vuoto attorno."
        },
        {
          question:
            "Gli ioni che formano i sali disciolti in acqua sono presenti in quale forma?",
          choices: ["Solida.", "Ionica (come ioni).", "Neutra.", "Gassosa."],
          correct: 1,
          explanation:
            "In soluzione, i sali sono presenti come ioni caricati positivamente (cationi) e negativamente (anioni)."
        }
      ],
      medio: [
        {
          question:
            "Se una porzione di materia non può essere scomposta con metodi fisici, ma può esserlo tramite reazioni chimiche, come viene classificata?",
          choices: ["Elemento.", "Miscuglio eterogeneo.", "Composto chimico.", "Miscuglio omogeneo."],
          correct: 2,
          explanation:
            "Una sostanza non separabile fisicamente ma scomponibile chimicamente è un composto chimico."
        },
        {
          question:
            "Quale informazione fondamentale fornisce il Numero Atomico (Z)?",
          choices: [
            "Il Numero di Massa (A).",
            "Il numero di protoni.",
            "Il numero totale di elettroni.",
            "Il numero di neutroni."
          ],
          correct: 1,
          explanation:
            "Il numero atomico indica il numero di protoni, che non varia e identifica l'elemento."
        },
        {
          question:
            "Perché filtrando acqua salata non si separa il sale dall'acqua?",
          choices: [
            "Il sale è troppo pesante.",
            "La decantazione è il metodo corretto.",
            "Il sale è più volatile.",
            "Le particelle sono troppo piccole e passano attraverso i pori del filtro."
          ],
          correct: 3,
          explanation:
            "In una soluzione le particelle sono a livello ultramicroscopico e attraversano il filtro perché troppo piccole."
        },
        {
          question:
            "Quale principio permette la separazione tramite distillazione di un miscuglio omogeneo?",
          choices: [
            "Il miscuglio è reversibile.",
            "La materia è fatta di atomi.",
            "Ogni sostanza pura ha un proprio punto di ebollizione (diversa volatilità).",
            "I legami chimici sono fortissimi."
          ],
          correct: 2,
          explanation:
            "La distillazione sfrutta i diversi punti di ebollizione delle sostanze pure presenti nella soluzione."
        },
        {
          question:
            "Un atomo con Z = 17 e A = 35 ha carica -1. Quanti elettroni possiede?",
          choices: ["17", "18", "35", "16"],
          correct: 1,
          explanation:
            "Lo ione possiede un elettrone in più rispetto all'atomo neutro: 17 protoni + 1 = 18 elettroni."
        },
        {
          question:
            "Qual è il paradosso della materia derivato dalla struttura atomica?",
          choices: [
            "L'atomo è più grande della molecola.",
            "La materia è piena ma l'atomo è quasi vuoto.",
            "I non metalli sono ottimi conduttori.",
            "I protoni variano."
          ],
          correct: 1,
          explanation:
            "La materia appare piena ma gli atomi che la compongono sono strutture prevalentemente vuote."
        },
        {
          question:
            "Perché la centrifugazione è una decantazione accelerata?",
          choices: [
            "Sfrutta il calore.",
            "Utilizza la forza centrifuga per separare velocemente particelle con densità diverse.",
            "Usa filtri.",
            "Non sfrutta la densità."
          ],
          correct: 1,
          explanation:
            "La forza centrifuga sostituisce la lenta azione della gravità, velocizzando la stratificazione per densità."
        },
        {
          question:
            "Due isotopi dello stesso elemento hanno:",
          choices: [
            "Diverso Z e proprietà chimiche diverse.",
            "Stesso A e stessi neutroni.",
            "Stesso Z e stesse proprietà chimiche, ma diverso A.",
            "Diverso numero di protoni ed elettroni."
          ],
          correct: 2,
          explanation:
            "Gli isotopi condividono il numero atomico e quindi le proprietà chimiche, ma differiscono per il numero di neutroni (A)."
        },
        {
          question:
            "Perché l'acqua potabile è un miscuglio mentre l'acqua distillata è una sostanza pura?",
          choices: [
            "L'acqua distillata è un elemento.",
            "L'acqua potabile è un composto.",
            "L'acqua potabile contiene sali e gas disciolti, l'acqua distillata solo molecole di H₂O.",
            "L'acqua potabile è neutra."
          ],
          correct: 2,
          explanation:
            "L'acqua potabile è una soluzione con sali, gas e microrganismi disciolti, mentre l'acqua distillata contiene solo H₂O."
        },
        {
          question:
            "I metalli tendono a perdere elettroni formando cationi. Qual è la configurazione di Na⁺?",
          choices: [
            "11 protoni e 12 elettroni.",
            "12 protoni e 11 elettroni.",
            "11 protoni e 10 elettroni.",
            "10 protoni e 11 elettroni."
          ],
          correct: 2,
          explanation:
            "Il sodio mantiene 11 protoni ma perde un elettrone, rimanendone con 10."
        },
        {
          question:
            "Perché gli atomi di un solido non si toccano nonostante la compattezza?",
          choices: [
            "Il solido è vuoto.",
            "Le particelle sono lontane.",
            "Gli elettroni si respingono ma i legami chimici sono forti e tengono insieme la struttura.",
            "I neutroni si annullano."
          ],
          correct: 2,
          explanation:
            "La repulsione tra elettroni impedisce il contatto diretto, mentre i legami chimici mantengono compatta la struttura."
        },
        {
          question:
            "Raffreddando e comprimendo un gas, in quale stato tende a trasformarsi?",
          choices: ["Solido.", "Liquido.", "Aeriforme.", "Ionico."],
          correct: 1,
          explanation:
            "Raffreddamento e pressione avvicinano le particelle, favorendo il passaggio allo stato liquido."
        },
        {
          question:
            "Qual è la differenza principale tra distillazione semplice e frazionata?",
          choices: [
            "La semplice è per miscugli eterogenei.",
            "La frazionata è solo per l'acqua.",
            "La frazionata separa componenti con punti di ebollizione molto vicini (meno di 25°C).",
            "La semplice separa solidi da gas."
          ],
          correct: 2,
          explanation:
            "La distillazione frazionata è usata quando le temperature di ebollizione dei componenti sono ravvicinate."
        },
        {
          question:
            "Se in un atomo varia il numero di neutroni, cosa cambia?",
          choices: [
            "Cambia Z.",
            "Cambia il Numero di Massa (A) ma restano invariati Z e le proprietà chimiche.",
            "Cambia la carica.",
            "Cambia il simbolo chimico."
          ],
          correct: 1,
          explanation:
            "Variare i neutroni crea isotopi: A cambia, ma Z e le proprietà chimiche restano uguali."
        },
        {
          question:
            "Quale proprietà fisica sfruttano in comune decantazione e centrifugazione?",
          choices: ["Volatilità.", "Densità.", "Dimensione dei pori.", "Carica elettrica."],
          correct: 1,
          explanation:
            "Entrambi i metodi separano componenti con densità diverse; cambia solo la forza applicata."
        },
        {
          question:
            "Perché un elemento è costituito da atomi tutti uguali?",
          choices: [
            "Perché hanno gli stessi neutroni.",
            "Perché formano un composto.",
            "Perché hanno lo stesso Numero Atomico (Z).",
            "Perché hanno le stesse proprietà fisiche."
          ],
          correct: 2,
          explanation:
            "Gli atomi di un elemento condividono lo stesso numero di protoni e quindi lo stesso numero atomico."
        },
        {
          question:
            "Quale particella può essere ceduta o acquistata da un atomo trasformandolo in uno ione senza mutarne l'identità chimica?",
          choices: ["Protone.", "Elettrone.", "Neutrone.", "Fotone."],
          correct: 1,
          explanation:
            "Solo gli elettroni possono variare senza modificare il numero atomico e quindi l'elemento."
        },
        {
          question:
            "Quale elemento rappresenta il 're della vita' nell'acronimo CHOMPS?",
          choices: ["Ossigeno.", "Idrogeno.", "Fosforo.", "Carbonio."],
          correct: 3,
          explanation:
            "Il Carbonio è l'elemento centrale attorno al quale si organizzano le molecole della vita."
        },
        {
          question:
            "Cosa accade agli ioni quando un sale come NaCl si scioglie in acqua?",
          choices: [
            "Scompaiono.",
            "Formano molecole neutre.",
            "Restano in soluzione come cationi e anioni.",
            "Diventano isotopi."
          ],
          correct: 2,
          explanation:
            "I composti ionici in soluzione si dissociano in ioni positivi e negativi."
        },
        {
          question:
            "Quale caratteristica fisica distingue nettamente metalli e non metalli?",
          choices: [
            "I metalli sono gassosi.",
            "Entrambi sono fragili.",
            "I metalli sono duttili e ottimi conduttori, i non metalli sono opachi e fragili.",
            "I non metalli sono lucenti."
          ],
          correct: 2,
          explanation:
            "I metalli sono lucenti, duttili e conduttori, mentre i non metalli sono opachi e poco conduttivi."
        }
      ],
      difficile: [
        {
          question:
            "Se una porzione di materia non è scomponibile tramite evaporazione ma lo è tramite elettrolisi, come si classifica?",
          choices: [
            "Miscuglio omogeneo.",
            "Elemento.",
            "Composto chimico.",
            "Sostanza pura non classificabile."
          ],
          correct: 2,
          explanation:
            "Non essendo separabile fisicamente ma decomposta chimicamente, è un composto chimico."
        },
        {
          question:
            "Un atomo neutro con Z = 15 e A = 31 contiene:",
          choices: [
            "15 elettroni e 31 protoni.",
            "16 protoni e 15 elettroni.",
            "Massa concentrata negli elettroni.",
            "15 protoni e 16 neutroni."
          ],
          correct: 3,
          explanation:
            "Gli elettroni sono 15 (come i protoni), i neutroni si ottengono da A − Z = 16."
        },
        {
          question:
            "Perché la decantazione semplice è poco efficiente con particelle molto piccole?",
          choices: [
            "Richiede temperature elevate.",
            "Si affida alla lenta forza di gravità e richiede lunghi tempi di riposo.",
            "Non sfrutta la densità.",
            "È adatta solo alle soluzioni."
          ],
          correct: 1,
          explanation:
            "La sola gravità impiega molto tempo a separare particelle piccole; la centrifugazione accelera il processo."
        },
        {
          question:
            "Il principio della repulsione degli elettroni e i legami chimici forti spiegano:",
          choices: [
            "La separazione acqua-sale.",
            "La differenza tra isotopi.",
            "Perché non attraversiamo i solidi pur non toccando gli atomi.",
            "La formazione degli ioni."
          ],
          correct: 2,
          explanation:
            "Le nostre mani non attraversano i solidi perché gli elettroni si respingono e i legami chimici mantengono la struttura."
        },
        {
          question:
            "Un composto ionico sciolto in acqua sarà presente come:",
          choices: [
            "Atomi neutri.",
            "Molecole intatte.",
            "Ioni cationi e anioni.",
            "Protoni e neutroni liberi."
          ],
          correct: 2,
          explanation:
            "In soluzione gli ioni restano separati come specie cariche positive e negative."
        },
        {
          question:
            "Nella specie ⁴⁰₂₀Ca²⁺ quanti protoni, neutroni ed elettroni sono presenti?",
          choices: [
            "Protoni 20, neutroni 20, elettroni 22.",
            "Protoni 20, neutroni 20, elettroni 18.",
            "Protoni 22, neutroni 18, elettroni 20.",
            "Protoni 20, neutroni 40, elettroni 20."
          ],
          correct: 1,
          explanation:
            "Z = 20 → protoni 20. Neutroni = 40 − 20 = 20. Carica +2 → ha perso due elettroni, quindi 18."
        },
        {
          question:
            "Perché è essenziale conoscere la dimensione delle particelle prima di scegliere un filtro?",
          choices: [
            "Per la volatilità.",
            "Per calcolare la densità.",
            "Perché i pori devono essere più piccoli delle particelle da trattenere.",
            "Perché conta solo la carica."
          ],
          correct: 2,
          explanation:
            "La filtrazione funziona solo se i pori del filtro trattengono le particelle solide da separare."
        },
        {
          question:
            "Il Carbonio-14 ha le stesse proprietà chimiche del Carbonio-12 perché:",
          choices: [
            "Il Numero Atomico diventa 8.",
            "Ha più neutroni quindi cambia chimicamente.",
            "Condivide lo stesso Numero Atomico e quindi la stessa configurazione elettronica.",
            "È un composto chimico."
          ],
          correct: 2,
          explanation:
            "Gli isotopi hanno uguale numero di protoni ed elettroni, quindi reagiscono chimicamente nello stesso modo."
        },
        {
          question:
            "Perché l'idrogeno è considerato un'anomalia nella tavola periodica?",
          choices: [
            "È un metallo liquido.",
            "È un semimetallo.",
            "È un non metallo gassoso che richiede pressione e freddo per liquefarsi.",
            "Ha Z = 1 ed è il re della vita."
          ],
          correct: 2,
          explanation:
            "Pur trovandosi a sinistra, l'idrogeno è un gas non metallico che tende ad espandersi."
        },
        {
          question:
            "Qual è la relazione corretta tra elemento e composto?",
          choices: [
            "Un composto è parte di un elemento.",
            "Entrambi sono miscugli eterogenei.",
            "L'elemento non è scomponibile, il composto è formato da più elementi separabili chimicamente.",
            "Entrambi si separano fisicamente."
          ],
          correct: 2,
          explanation:
            "Gli elementi sono indivisibili chimicamente, mentre i composti sono combinazioni di elementi separabili tramite reazioni."
        },
        {
          question:
            "Quando è necessaria la distillazione frazionata?",
          choices: [
            "Per miscugli eterogenei.",
            "Per accelerare con forza centrifuga.",
            "Quando i punti di ebollizione dei componenti differiscono di meno di 25°C.",
            "Quando i componenti non sono volatili."
          ],
          correct: 2,
          explanation:
            "Temperature di ebollizione molto vicine richiedono colonne frazionate per separare efficacemente le componenti."
        },
        {
          question:
            "Come si risolve il contrasto tra studio microscopico della chimica e proprietà macroscopiche degli elementi?",
          choices: [
            "Tutte le proprietà macroscopiche appartengono al singolo atomo.",
            "La tavola non contiene proprietà dello stato fisico.",
            "Le proprietà macroscopiche derivano da tantissimi atomi, mentre la tavola indica anche le proprietà chimiche del singolo atomo.",
            "Le proprietà chimiche e fisiche coincidono sempre."
          ],
          correct: 2,
          explanation:
            "Le proprietà macroscopiche emergono dall'insieme di moltissimi atomi, ma la tavola descrive anche il comportamento chimico della singola specie atomica."
        },
        {
          question:
            "Se un atomo di carbonio acquisisce quattro elettroni diventando C⁴⁻, quale affermazione è falsa?",
          choices: [
            "È un anione.",
            "Il Numero Atomico resta 6.",
            "Possiede 10 elettroni.",
            "È cambiato il Numero di Massa (A)."
          ],
          correct: 3,
          explanation:
            "Il Numero di Massa dipende da protoni e neutroni, che non sono variati."
        },
        {
          question:
            "Quando è preferibile la centrifugazione rispetto alla decantazione?",
          choices: [
            "Quando il miscuglio è omogeneo.",
            "Quando i componenti hanno la stessa densità.",
            "Quando la separazione per densità è troppo lenta o insufficiente con la sola gravità.",
            "Quando i componenti hanno diversi punti di ebollizione."
          ],
          correct: 2,
          explanation:
            "La centrifugazione si usa quando serve accelerare o rendere efficace la separazione basata sulla densità."
        },
        {
          question:
            "Perché l'acqua distillata è classificata come sostanza pura mentre l'acqua potabile come miscuglio?",
          choices: [
            "Perché l'acqua distillata è un elemento.",
            "Perché l'acqua potabile è un composto.",
            "Perché nell'acqua potabile i sali e i gas disciolti possono essere separati fisicamente, cosa impossibile nell'acqua distillata.",
            "Perché l'evaporazione è irreversibile."
          ],
          correct: 2,
          explanation:
            "L'acqua potabile contiene soluti separabili fisicamente, mentre l'acqua distillata è un composto puro (H₂O)."
        },
        {
          question:
            "Perché la definizione di molecola è cruciale per la chimica?",
          choices: [
            "Un composto può essere un solo atomo.",
            "Le proprietà chimiche di un composto derivano dal raggruppamento specifico di atomi che lo costituiscono.",
            "Tutte le molecole hanno formule identiche.",
            "La molecola ha lo stesso numero di protoni dell'atomo."
          ],
          correct: 1,
          explanation:
            "La molecola è la più piccola parte di un composto che ne conserva le proprietà chimiche, distinguendola dal singolo atomo."
        },
        {
          question:
            "Quale fenomeno non dipende dalla dilatazione o restringimento delle particelle?",
          choices: [
            "Passaggio liquido-gas.",
            "Liquefazione di un gas.",
            "Separazione di olio e acqua per densità.",
            "Raffreddamento di un oggetto."
          ],
          correct: 2,
          explanation:
            "La separazione olio-acqua dipende dalla diversa densità e dall'azione della gravità, non da variazioni termiche."
        },
        {
          question:
            "Come si distribuisce la massa totale di un atomo nella sua struttura?",
          choices: [
            "Uniformemente tra elettroni e nucleo.",
            "In modo compatto nell'intero volume.",
            "È concentrata quasi esclusivamente nel nucleo, anche se l'atomo è quasi vuoto.",
            "Dipende solo da Z."
          ],
          correct: 2,
          explanation:
            "La massa atomica risiede quasi interamente in protoni e neutroni nel nucleo."
        },
        {
          question:
            "Quale particella subatomica può variare modificando il Numero di Massa ma non l'identità chimica?",
          choices: ["Protone.", "Elettrone.", "Neutrone.", "Ione."],
          correct: 2,
          explanation:
            "Variare il numero di neutroni cambia il Numero di Massa (A) senza alterare Z; si ottengono isotopi."
        },
        {
          question:
            "Cosa implica il fatto che CHOMPS descriva il 99% della materia vivente?",
          choices: [
            "Che tutti gli elementi sono necessari per la vita.",
            "Che gli elementi CHOMPS sono miscugli omogenei.",
            "Che pochi elementi, guidati dal carbonio, bastano a creare la complessità della vita.",
            "Che solo CHOMPS forma ioni."
          ],
          correct: 2,
          explanation:
            "La vita si basa su una combinazione limitata di elementi, evidenziando il ruolo centrale del carbonio."
        }
      ]
    };

    const difficultyButtons = document.querySelectorAll('.difficulty-selector button');
    const questionEl = document.getElementById('question');
    const optionsEl = document.getElementById('options');
    const feedbackEl = document.getElementById('feedback');
    const progressEl = document.getElementById('progress');
    const scoreEl = document.getElementById('score');
    const nextBtn = document.getElementById('next');
    const restartBtn = document.getElementById('restart');
    const summaryEl = document.getElementById('summary');

    let state = {
      level: null,
      questions: [],
      currentIndex: 0,
      score: 0,
      answered: false
    };

    function resetButtons() {
      difficultyButtons.forEach((btn) => btn.classList.remove('active'));
    }

    function updateMeta() {
      progressEl.textContent = `Domanda ${state.questions.length ? state.currentIndex + 1 : 0} / ${state.questions.length}`;
      scoreEl.textContent = `Punteggio: ${state.score}`;
    }

    function renderQuestion() {
      const current = state.questions[state.currentIndex];
      if (!current) {
        questionEl.textContent = 'Seleziona un livello per iniziare.';
        optionsEl.innerHTML = '';
        feedbackEl.className = 'feedback';
        feedbackEl.textContent = '';
        nextBtn.disabled = true;
        restartBtn.disabled = true;
        summaryEl.classList.remove('visible');
        summaryEl.textContent = '';
        updateMeta();
        return;
      }

      questionEl.textContent = current.question;
      optionsEl.innerHTML = '';
      feedbackEl.className = 'feedback';
      feedbackEl.textContent = '';
      state.answered = false;
      nextBtn.disabled = true;

      current.choices.forEach((choice, index) => {
        const button = document.createElement('button');
        button.type = 'button';
        button.className = 'option';
        button.textContent = choice;
        button.dataset.index = index;
        button.addEventListener('click', () => handleAnswer(button, index));
        optionsEl.appendChild(button);
      });

      updateMeta();
    }

    function handleAnswer(button, index) {
      if (state.answered) return;
      const current = state.questions[state.currentIndex];
      const options = Array.from(optionsEl.querySelectorAll('.option'));
      const isCorrect = index === current.correct;
      state.answered = true;

      if (isCorrect) {
        state.score += 1;
        feedbackEl.className = 'feedback visible positive';
        feedbackEl.textContent = `Corretto! ${current.explanation}`;
      } else {
        feedbackEl.className = 'feedback visible negative';
        feedbackEl.textContent = `Risposta errata. ${current.explanation}`;
      }

      options.forEach((opt, idx) => {
        opt.disabled = true;
        if (idx === current.correct) {
          opt.classList.add('correct');
        } else if (idx === index) {
          opt.classList.add('wrong');
        }
      });

      nextBtn.disabled = state.currentIndex === state.questions.length - 1;
      restartBtn.disabled = false;
      updateMeta();

      if (state.currentIndex === state.questions.length - 1) {
        showSummary();
      }
    }

    function showSummary() {
      summaryEl.classList.add('visible');
      summaryEl.innerHTML = `
        <h3>Quiz completato!</h3>
        <p>Hai ottenuto <strong>${state.score}</strong> punti su ${state.questions.length}.</p>
        <p>${getFeedbackMessage()}</p>
      `;
    }

    function getFeedbackMessage() {
      const ratio = state.score / state.questions.length;
      if (ratio === 1) return 'Perfetto! Conosci la materia in modo impeccabile.';
      if (ratio >= 0.75) return 'Ottimo lavoro! Continua così per diventare un maestro della chimica.';
      if (ratio >= 0.5) return 'Buon risultato! Ripassa gli argomenti meno chiari e riprova.';
      return 'Non scoraggiarti: rileggi le spiegazioni e fai un altro tentativo.';
    }

    function loadLevel(levelKey) {
      state = {
        level: levelKey,
        questions: [...quizData[levelKey]],
        currentIndex: 0,
        score: 0,
        answered: false
      };
      shuffle(state.questions);
      summaryEl.classList.remove('visible');
      summaryEl.textContent = '';
      restartBtn.disabled = false;
      renderQuestion();
    }

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i -= 1) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    difficultyButtons.forEach((button) => {
      button.addEventListener('click', () => {
        const level = button.dataset.level;
        resetButtons();
        button.classList.add('active');
        loadLevel(level);
      });
    });

    nextBtn.addEventListener('click', () => {
      if (!state.questions.length) return;
      if (state.currentIndex < state.questions.length - 1) {
        state.currentIndex += 1;
        renderQuestion();
      }
    });

    restartBtn.addEventListener('click', () => {
      if (!state.level) return;
      loadLevel(state.level);
    });

    renderQuestion();
  </script>
</body>
</html>
